<?xml version="1.0" encoding="UTF-8"?>
<webApp>
    <containers>
        <webContainer>
            <name>web</name>
            <connectWith>data</connectWith>
            <dockerImage>glassfish</dockerImage>
            <run>
                <preMain>
                    <script>
                        <path>/broker/testCases/2tierapp/load-env-vars-to-xml.sh</path>
                        <args></args>
                    </script>
                </preMain>
            	<main>
                    <script>
                        <path>/broker/testCases/2tierapp/web-entrypoint.sh</path>
                		<args></args>
                    </script>
                </main>
                <postMain> 
                    <cmd>asadmin add-resources /broker/testCases/2tierapp/glassfish-resources-new.xml</cmd>
                </postMain>
                <postMain> 
                    <cmd>asadmin deploy /broker/testCases/2tierapp/IFPWAFCAD.war</cmd>
                </postMain> 
            </run>
            <environment>
                <host_url>localhost:4848</host_url>
                <host_port>4848</host_port>
            </environment>
        </webContainer>

        <businessContainer>
            <name>business</name>
            <connectWith>web data</connectWith>
            <dockerImage>java</dockerImage>
            <run>
                <main>
                    <script>
                        <path></path>
                    </script>
                </main>
            </run>
            <environment>
                <host_url>http://something.com</host_url>
                <host_port>8080</host_port>
            </environment>
        </businessContainer>

        <dataContainer>
            <name>data</name>
            <connectWith></connectWith>
            <dockerImage>dio/mysql_jre:v2</dockerImage>
            <run>
                <main>
                    <script>
                        <path>/broker/testCases/2tierapp/data-entrypoint.sh</path>
                        <args>mysqld</args>
                    </script>
                </main>
            </run>
            <environment>
                <host_url>jdbc:mysql://localhost:3306/test?profileSQL=true</host_url>
                <db_port>3306</db_port>
                <db_user>root</db_user>
                <db_pass>root</db_pass>
                <db_name>2TIERAPP</db_name>
                <db_driver></db_driver>
            </environment>
        </dataContainer>


    </containers>

    <webAppName>WebApp</webAppName>
</webApp>